<ng-container
    *ngIf="{query: query$ | async} as data"
    class="container mx-auto"
  >
    <ul *ngIf="data.query" class="m-8">
      <cdk-virtual-scroll-viewport
        role="presentation"
        scrollWindow
        [itemSize]="itemSize"
        (scrolledIndexChange)="onScroll(data.query.nextPage)"
        class="search-results__viewport"
      >
        <li class="grid" *ngIf="isGridView; else cardView">
          <table>
            <tr class="">
              <th>Name</th>
              <th>Description</th>
              <th>Language</th>
              <th>Stars</th>
              <th>Updated Date</th>
              <th>Username</th>
              <th>URL</th>
            </tr>
            <tr *cdkVirtualFor="let result of data.query.results" class="h-[{{ itemSize }}px] grid-tr">
              <td>{{result.name}}</td>
              <td>{{result.description}}</td>
              <td>{{result.language}}</td>
              <td>{{result.stargazers_count }}</td>
              <td>{{result.updated_at | date}}</td>
              <td>{{result.owner.login}}</td>
              <td><a [href]="result.html_url">{{result.html_url}}</a></td>
            </tr>
          </table>
        </li>

        <ng-template #cardView>
          <li class="gri">
            <mat-card *cdkVirtualFor="let result of data.query.results" class="h-[{{ itemSize }}px] grid-tr">
              <mat-card-header>
                <mat-card-title>{{result.name}}</mat-card-title>
                <mat-card-subtitle>{{result.description}}</mat-card-subtitle>
              </mat-card-header>
            </mat-card>
          </li>
          
        </ng-template>
      </cdk-virtual-scroll-viewport>
    </ul>
</ng-container>
  